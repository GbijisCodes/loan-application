<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Loan Aplication</title>
    <link rel="stylesheet" href="index.css">
</head>
<body>
    <div class="loan">
        <img src="./fi_chevron-left.svg" alt="">
        <p class="loantext">Loan Application</p>
        <div class="options">
            <img src="./Vector.svg" alt="">
            <img src="./Vector.svg" alt="">
            <img src="./Vector.svg" alt="">
        </div>

    </div>

    <div class="maxfund">
        <div class="figures1">
            <p class="maximumfund">Maximum Funding</p>
            <p class="fund">NGN 17,000,000</p>

        </div>
        <hr>
        <div class="loanpurpose">
            <div class="title">
                <p class="carname">Honda ADV 150 CBS</p>
                <p class="caryear">2022</p>
            </div>
            <div class="optionsslider">
                <img src="./fisliderscopy.svg" alt="">
            </div>
        </div>

        <div class="carlist hidden"></div>


        

    </div>

    <div class="maxfund2">
        <p class="loanamount">Loan Amount</p>
        <p class="loanamountfigure">₦100,000</p>
        <div class="slider">
            <input type="range" min="100000" max="17480000" value="100000" class="loan-range" id="loanAmountSlider">
        </div>
        <div class="infobelow">
            <div class="values">₦100,000</div>
            <div class="values2">17.480.000</div>
        </div>
    </div>
    <div class="maxfund2">
        <p class="loanamount">Loan Period</p>
        <p class="loanperiodfigure">12 Months</p>
        <div class="slider">
            <input type="range" min="8" max="26" value="12" class="loan-range" id="loanPeriodSlider">
        </div>
        <div class="infobelow">
            <div class="values">8 Months</div>
            <div class="values2">26 Months</div>
        </div>
    </div>


    <div class="final">
        <p class="estimated">Estimated monthly installments</p>
        <p class="moneyvalue">NGN 150,000</p>
        <p class="installmentfee">Installment fees may change according to the results of the verification of the physical condition of the vehicle at the branch office.</p>
        <button class="applyloan">Apply Loan</button>
    </div>

    
</body>
<script>
  const cars = [
  { brand: "Toyota", model: "Corolla", year: 2018, maxFunding: 1000000, loanamount:1000000 },
  { brand: "Honda", model: "Civic", year: 2019, maxFunding: 1750000, loanamount:1750000},
  { brand: "Mazda", model: "CX-5", year: 2020, maxFunding: 2500000, loanamount:2500000 },
  { brand: "BMW", model: "3 Series", year: 2021, maxFunding: 3250000 , loanamount:3250000},
  { brand: "Toyota", model: "Prado", year: 2022, maxFunding: 4000000,loanamount:4000000 }
];

const toggleBtn = document.querySelector('.optionsslider img');
const carList = document.querySelector('.carlist');
const carName = document.querySelector('.carname');
const carYear = document.querySelector('.caryear');
const fundValue = document.querySelector('.fund');
const loanamountfig = document.querySelector('.loanamountfigure');
const upperboundvalue = document.querySelector('.values2');

const loanAmountSlider = document.getElementById('loanAmountSlider');
const loanPeriodSlider = document.getElementById('loanPeriodSlider');
const loanAmountText = document.querySelector('.loanamountfigure');
const loanPeriodText = document.querySelector('.loanperiodfigure');
const monthlyInstallmentText = document.querySelector('.moneyvalue');

let selectedCar = cars[0]; 
const minLoanValue = 100000;

// render car list
function renderCarList() {
  carList.innerHTML = "";

  cars.forEach((car) => {
    const div = document.createElement('div');
    div.classList.add('caritem');
    if (car === selectedCar) div.classList.add('active');

    div.innerHTML = `
      <span>${car.brand} ${car.model} ${car.year}</span>
      <span>₦${car.maxFunding.toLocaleString()}</span>
    `;

    div.addEventListener('click', () => {
      selectedCar = car;
      updateSelectedCar();
      renderCarList();
      carList.classList.add('hidden');
    });

    carList.appendChild(div);
  });
}

// Toggle dropdown visibility
toggleBtn.addEventListener('click', () => {
  carList.classList.toggle('hidden');
});

// Update selected car info
function updateSelectedCar() {
  carName.textContent = `${selectedCar.brand} ${selectedCar.model}`;
  carYear.textContent = selectedCar.year;
  fundValue.textContent = `₦${selectedCar.maxFunding.toLocaleString()}`;
  upperboundvalue.textContent = `₦${selectedCar.loanamount.toLocaleString()}`;
  
  updateSliderForCar();
}

function updateSliderForCar() {
  loanAmountSlider.min = minLoanValue;
  loanAmountSlider.max = selectedCar.loanamount;
  loanAmountSlider.value = minLoanValue;
  updateLoanAmountDisplay();
}

function updateLoanAmountDisplay() {
  const min = parseFloat(loanAmountSlider.min);
  const max = parseFloat(loanAmountSlider.max);
  const val = parseFloat(loanAmountSlider.value);

  //  percentage for blue fill
  const percent = ((val - min) / (max - min)) * 100;

  // Update the blue fill gradient
  loanAmountSlider.style.background = `linear-gradient(to right, #29BBCF ${percent}%, #E5E7EC ${percent}%)`;

  // Update text
  loanAmountText.textContent = `₦${val.toLocaleString()}`;

  // Update monthly installment
  updateMonthlyInstallment();
}

function updateLoanPeriodDisplay() {
  const min = parseFloat(loanPeriodSlider.min);
  const max = parseFloat(loanPeriodSlider.max);
  const val = parseFloat(loanPeriodSlider.value);

  // Calculate percentage for blue fill
  const percent = ((val - min) / (max - min)) * 100;

  // Update the blue fill gradient
  loanPeriodSlider.style.background = `linear-gradient(to right, #29BBCF ${percent}%, #E5E7EC ${percent}%)`;

  // Update text
  loanPeriodText.textContent = `${val} Months`;

  // Update monthly installment
  updateMonthlyInstallment();
}

function updateMonthlyInstallment() {
  const loanAmount = parseFloat(loanAmountSlider.value);
  const loanPeriod = parseFloat(loanPeriodSlider.value);
  
  const monthly = loanAmount / loanPeriod;
  monthlyInstallmentText.textContent = `₦${Math.round(monthly).toLocaleString()}`;
}

loanAmountSlider.addEventListener('input', updateLoanAmountDisplay);
loanPeriodSlider.addEventListener('input', updateLoanPeriodDisplay);


renderCarList();
updateSelectedCar();
updateLoanPeriodDisplay(); // Initialize loan period slider display

</script>
</html>
